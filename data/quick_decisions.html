<!DOCTYPE html>
<html>
  <head>
    <title>Moral Decision Experiment</title>
    <script src="https://unpkg.com/jspsych@8.0.2"></script>
    <script src="https://unpkg.com/@jspsych/plugin-html-keyboard-response@2.0.0"></script>
    <script src="https://unpkg.com/@jspsych/plugin-survey-likert@2.0.0"></script>
    <link href="https://unpkg.com/jspsych@8.0.2/css/jspsych.css" rel="stylesheet" type="text/css" />
  </head>
  <body></body>
  <script>
    const jsPsych = initJsPsych({
      on_finish: function() {
        jsPsych.data.displayData();
      }
    });

    // Moral Condition scenario
    const moralScenario = {
      type: jsPsychHtmlKeyboardResponse,
      stimulus: `
        <p>Justin and Nate were walking to separate cars in the parking lot of Andronico’s, a local grocery store, when they each spotted a different lost wallet next to their cars. Upon picking up the wallet and looking inside, each found several hundred dollars in cash.</p>
        <p>Justin saw his decision as an easy one and was able to decide quickly. He did not steal the money and instead left the wallet with Customer Service.</p>
        <p>Nate saw his decision as difficult and was only able to decide after long and careful deliberation. After several minutes of thinking in his car, he too decided not to steal the money and instead left the wallet with Customer Service.</p>
        <p>Press any key to continue.</p>
      `
    };

    // Immoral Condition scenario
    const immoralScenario = {
      type: jsPsychHtmlKeyboardResponse,
      stimulus: `
        <p>Justin and Nate were walking to separate cars in the parking lot of Andronico’s, a local grocery store, when they each spotted a different lost wallet next to their cars. Upon picking up the wallet and looking inside, each found several hundred dollars in cash.</p>
        <p>Justin saw his decision as an easy one and was able to decide quickly. He pocketed the money and drove off.</p>
        <p>Nate saw his decision as difficult and was only able to decide after long and careful deliberation. After several minutes of thinking in his car, he too decided to pocket the money and drive off.</p>
        <p>Press any key to continue.</p>
      `
    };

    // Reminder for Justin
    const justinReminder = {
      type: jsPsychHtmlKeyboardResponse,
      stimulus: `<p>Remember: Justin saw his decision as easy/difficult and decided to return/pocket the money.</p><p>Press any key to continue.</p>`,
      choices: "NO_KEYS",
      trial_duration: 2000
    };

    // Reminder for Nate
    const nateReminder = {
      type: jsPsychHtmlKeyboardResponse,
      stimulus: `<p>Remember: Nate saw his decision as easy/difficult and decided to return/pocket the money.</p><p>Press any key to continue.</p>`,
      choices: "NO_KEYS",
      trial_duration: 2000
    };

    // Questions for Justin
    const justinQuestions = {
      type: jsPsychSurveyLikert,
      preamble: `<p>Please answer the following questions about Justin:</p>`,
      questions: [
        { prompt: "Did Justin make his decision quickly or slowly?", labels: ["1 (particularly slowly)", "2", "3", "4", "5", "6", "7 (particularly quickly)"], required: true },
        { prompt: "Does it sound like Justin has underlying moral principles that are good, bad, or somewhere in between?", labels: ["1 (completely bad)", "2", "3", "4 (mixed)", "5", "6", "7 (completely good)"], required: true },
        // Add additional questions as needed
      ]
    };

    // Questions for Nate
    const nateQuestions = {
      type: jsPsychSurveyLikert,
      preamble: `<p>Please answer the following questions about Nate:</p>`,
      questions: [
        { prompt: "Did Nate make his decision quickly or slowly?", labels: ["1 (particularly slowly)", "2", "3", "4", "5", "6", "7 (particularly quickly)"], required: true },
        { prompt: "Does it sound like Nate has underlying moral principles that are good, bad, or somewhere in between?", labels: ["1 (completely bad)", "2", "3", "4 (mixed)", "5", "6", "7 (completely good)"], required: true },
        // Add additional questions as needed
      ]
    };

    // Timeline setup
    const timeline = [
      moralScenario,
      justinReminder,
      justinQuestions,
      nateReminder,
      nateQuestions,
      immoralScenario,
      justinReminder,
      justinQuestions,
      nateReminder,
      nateQuestions
    ];

    // Run the experiment
    jsPsych.run(timeline);
  </script>
</html>
